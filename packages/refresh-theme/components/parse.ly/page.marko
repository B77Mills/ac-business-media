import { getAsObject, get } from "@base-cms/object-path";

$ const { headline } = input;
$ const req = get(out, "global.req")
$ const url = `${req.protocol}://${req.headers.host}${req.originalUrl}`;
$ const logo = getAsObject(input, "section.logo");
$ const payload = {
  "@context": "http://schema.org",
  "@type": "WebPage",
  headline,
  url,
  ...(logo.src && { thumbnailUrl: logo.src }),
};

<script type="application/ld+json">${JSON.stringify(payload)}</script>
